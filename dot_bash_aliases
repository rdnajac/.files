# ~/.bash_aliases
# Default .bashrc automatically sources `~/.bash_aliases` when present
# check out `/usr/share/doc/bash` for more resources

# uncomment the next line for a more intuitive default `ls`
# alias ls='ls -F --color=auto --human-readable --group-directories-first'
alias ll='ls -lA'
# alias lll='ls -lAc --size -1 -S --classify'

# function to change directory and list files
cl() { builtin cd "${1:-$HOME}" && ls; }

alias bd='cd -'
alias ..='cd ..'
alias ...='cd ../..'

# make verbose default
alias cp='cp -vi'
alias mv='mv -vi'
alias rm='rm -vi'
alias rmd='rm -drvI'
alias mkdir='mkdir -v'
alias rmdir='rmdir -v'
alias lock='chmod -vv -w'   # make a file read-only
alias chx='chmod -vv u+x'   # make a file executable
alias link='ln -vsfFwh'     # see `man ln` for flags

# colored output for common commands
alias grep='grep --color=auto'
alias diff='diff --color=auto'

alias pip=pip3
alias rscript='Rscript'

alias zz=fg

VISUAL=${VISUAL:-nv}
# edit config files
alias ssx='$VISUAL $HOME/.ssh/config'
# chezmoi-managed
alias ba='$VISUAL $HOME/.bash_aliases'
alias tmx='$VISUAL $HOME/.config/tmux/tmux.conf'

alias gs='git status'
alias ga='git add'
alias gcm='git commit -m'
alias gcam='git commit -am'
alias gp='git push'
alias gs='git status'
alias gcd='cd $(git rev-parse --show-toplevel)'
alias zg='cd $(git rev-parse --show-toplevel)'

# function to check if a command exists
installed() { command -v "$1" >/dev/null 2>&1; }

# TODO: don't install with brew, use npx
# TODO: don't use alias manually, integrate with nvim or git hook
installed prettier && alias pretty='prettier --write .'

# alias tmux='tmux -2'
installed tmux && alias kms='tmux kill-server'

# rsync all non-hidden files and directories
installed rsync \
	&& alias sync='rsync -avz --progress --exclude=".*"'

# update all cargo packages if cargo-install-update is also installed
installed cargo-install-update \
	&& alias cargoup='cargo install-update -a'

installed bear && alias bmake='bear -- make'
alias kmake='cd ~/kernel_dev/linux && make -j $(nproc) && \
	sudo make modules_install && sudo make install'

if installed gh; then
	alias cs='gh codespace'
	alias whats='gh copilot explain '
	alias \?\?='gh copilot suggest --shell-out '
fi

if installed quarto; then
	alias qp='quarto preview'
	alias qr='quarto render'
fi

unset -f installed # clean-up

# clear scren and restart shell
ree() { clear -x && echo "(╯°□°)╯︵ ┻━┻" && exec "$SHELL"; }

# TODO: move this to ~/bin
# clean up common files that are not needed in the repository
Clean() {
  if [ -n "$ZSH_VERSION" ]; then
    setopt localoptions null_glob
    rm -rfv **/.{netrwhist,DS_Store} **/*.{swp,bak}
  elif [ -n "$BASH_VERSION" ]; then
    shopt -s globstar nullglob
    rm -rfv **/.{netrwhist,DS_Store} **/*.{swp,bak}
    shopt -u globstar nullglob
  fi
}
